<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
</head>

<body>
    <script>
        const socket = new WebSocket(
            'ws://localhost:56865/socket?token=__TEST_MODE__',
        );

        socket.addEventListener('open', (event) => {
            const subscribe = {
                type: 'subscribe',
                topic: 'some:topic',
            };
            socket.send(JSON.stringify(subscribe));

            setTimeout(() => {
                const publish = {
                    type: 'publish',
                    topic: 'some:topic',
                    data: {
                        some: 'data',
                    },
                };
                socket.send(JSON.stringify(publish));
            }, 3000);
        });

        socket.addEventListener('message', (event) => {
            console.log('Message from server ', event.data);
        });
    </script>
</body>

</html>
